<!-- Bootstrap core JavaScript-->
<script src="/dist/vendor/jquery/jquery.min.js"></script>

<script src="/plugins/jquery-loading-overlay-2.1.7/loadingoverlay.min.js"></script>

<script src="/plugins/jquery-ui/jquery-ui.min.js"></script>
<script src="/plugins/elfinder/js/elfinder.full.min.js"></script>


<script src="/dist/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Core plugin JavaScript-->
<script src="/dist/vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom scripts for all pages-->
<script src="/dist/js/sb-admin-2.min.js"></script>

<script src="/dist/js/jquery.validate.min.js"></script>
<script src="/dist/js/jquery.validate.unobtrusive.min.js"></script>

<script src="/plugins/noty/noty.min.js"></script>

<script src="/plugins/bootstrap-extends/bootstrap-select.min.js"></script>
<script src="/plugins/bootstrap-extends/bootstrap-datepicker.min.js"></script>

<script src="/dist/vendor/datatables/jquery.dataTables.min.js"></script>
<script src="/dist/vendor/datatables/dataTables.bootstrap4.min.js"></script>

<script src="/plugins/ckeditor/ckeditor.js"></script>

<script src="/plugins/sweetalert2/sweetalert2.min.js"></script>

<script src="/dist/js/aspcore.mvc.modal.form.js"></script>

<script src="/plugins/mime/mime@latest.js"></script>

<script type="text/javascript" src="/plugins/d3-cloud/d3.v3.min.js"></script>
<script type="text/javascript" src="/plugins/d3-cloud/d3.layout.cloud.js"></script>

<script src="/plugins/treejs/tree.min.js"></script>

<script src="/plugins/green-audio-player/green-audio-player.min.js"></script>

<script src="/dist/js/sidebar-menu.custom.js"></script>
<script src="/dist/js/aspcore.mvc.custom.js"></script>


<script>
    var images = document.getElementsByTagName("img");
    for (var i = 0; i < images.length; i++) {
        if (images[i].src == undefined || images[i].src == null || images[i].src == '') {
                images[i].src = '@await s.GetOrNullAsync(PageSettingProvider.SITE_HOLDER_IMAGE)';
            } else {
                images[i].onerror = function () {
                    this.onerror = null;
                    this.src = '@await s.GetOrNullAsync(PageSettingProvider.SITE_HOLDER_IMAGE)';
            }
        }
    }

    function syncAlertCenter() {
        $("#alert-center-content").load("/alert-center/sync", function () {
            var total = $("#alert-center-count").val();

        })
    }

    function syncCountNotification() {
        fetch("/api/app/notification/count-unread-notification")
            .then(r => r.text())
            .then(data => {
                var count = data;
                if (count > 0) {
                    $("#alert-center-badge").removeClass("d-none");
                    var countZ = count;
                    if (count > 5) {
                        countZ = "5+";
                    } else {
                        countZ = count.toString();
                    }
                    $("#alert-center-badge").html(countZ);
                } else {
                    $("#alert-center-badge").addClass("d-none");
                }
            });
    }
    syncCountNotification();
    syncAlertCenter();
</script>

@Html.ShowToasts()